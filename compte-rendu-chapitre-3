Chapitre 3 :

Modes d'exécution du processeur

Exercice : changement de mode d'exécution

Question 3-1 :

Mode d'exécution : System

Question 3-2 :

instruction : __asm("cps #19")
car 19 = 0b 10011

Avant l'instruction :
	Valeur de CPSR : 0x1DF donc mode System
	Valeur de SP : 0x95FC
	
Après l'instruction :
	Valeur de CPSR : 0x1D3 donc mode SVC
	Valeur de SP : 0x93FC
	
???? Vérifier que les valeurs de SP sont bonnes ????
???? Comment faire ????

Question 3-3 :

Avant le mode SVC :
	LR = 0x8098
	
Après le mode SVC :
	LR = 0x0
	
Quand on passe en mode SVC, LR pointe vers la table des vecteurs
d'interruption. En effet, le mode SVC est déclenché lors des
interruptions logicielles.

Question 3-4 :

On ne passe pas en mode SVC, on reste en mode USER.
En fait, on passe en mode SVC lorsqu'il y a une interruption
logicielle. En étant en mode USER, il n'est pas possible de forcer
à passer en "privilege mode". SVC est le mode des interruptions
logicielles. On peut passer en mode SVC lorsqu'on est en mode System.
On n'a pas les privilèges nécessaires.

Question 3-5 :

Ce n'est pas possible d'accéder au mode SPSR au début de kmain car
nous sommes en mode System, et le mode System ne possède pas de
registre SPSR.

ATTENTION : en fait il fallait utiliser l'instruction mrs pour
essayer d'afficher SPRS.

Question 3-6 : OK
